<ion-header>
    <ion-toolbar color="primary">
        <ion-title> Filters</ion-title>
    </ion-toolbar>
</ion-header>
<ion-content>
    <form [formGroup]="form"
          (ngSubmit)="apply()">

        <ion-grid>
            <ion-row>
                <ion-col size="12">
                    <ion-item lines="full">
                        <ion-label position="floating">Accounts</ion-label>
                        <ionic-selectable #accountComponent
                                          [items]="accounts"
                                          placeholder="Select accounts"
                                          itemValueField="id"
                                          itemTextField="name"
                                          formControlName="accountIds"
                                          [isMultiple]="true"
                                          [canClear]="true"
                                          [canSearch]="false">
                            <ng-template ionicSelectableHeaderTemplate>
                                <ion-toolbar color="primary">
                                    <ion-icon name="close-circle"
                                              class="close-button"
                                              slot="end"
                                              (click)="accountComponent.close()"></ion-icon>
                                    <ion-title>
                                        Select Account
                                    </ion-title>
                                </ion-toolbar>
                            </ng-template>
                            <ng-template ionicSelectableValueTemplate
                                         let-records="value">
                                <div class="ionic-selectable-value-item">
                                    {{formatData(records)}}
                                </div>
                            </ng-template>
                        </ionic-selectable>
                    </ion-item>
                </ion-col>

                <ion-col size="12">
                    <ion-item lines="full">
                        <ion-label position="floating">Types</ion-label>
                        <ionic-selectable #typeComponent
                                          [items]="types"
                                          placeholder="Select types"
                                          formControlName="transactionTypes"
                                          itemValueField="name"
                                          itemTextField="name"
                                          [isMultiple]="true"
                                          [canClear]="true"
                                          [canSearch]="false">
                            <ng-template ionicSelectableHeaderTemplate>
                                <ion-toolbar color="primary">
                                    <ion-icon name="close-circle"
                                              class="close-button"
                                              slot="end"
                                              (click)="typeComponent.close()"></ion-icon>
                                    <ion-title>
                                        Select Transaction type
                                    </ion-title>
                                </ion-toolbar>
                            </ng-template>
                            <ng-template ionicSelectableValueTemplate
                                         let-records="value">
                                <div class="ionic-selectable-value-item">
                                    {{formatData(records)}}
                                </div>
                            </ng-template>
                        </ionic-selectable>
                    </ion-item>
                </ion-col>

                <ion-col size="12"
                         size-md="6">
                    <ion-item lines="full">
                        <ion-label position="floating">From Date</ion-label>
                        <ion-input placeholder="Enter date"
                                   formControlName="fromDate"
                                   type="date"></ion-input>
                    </ion-item>
                </ion-col>

                <ion-col size="12"
                         size-md="6">
                    <ion-item lines="full">
                        <ion-label position="floating">To Date</ion-label>
                        <ion-input placeholder="Enter date"
                                   formControlName="toDate"
                                   type="date"></ion-input>
                    </ion-item>
                </ion-col>

                <ion-col size="12"
                         size-md="6">
                    <ion-item class="range-component"
                              lines="full">
                        <ion-label position="floating">From Amount</ion-label>
                        <ion-input placeholder="Enter amount"
                                   formControlName="fromAmount"
                                   type="currency"></ion-input>
                    </ion-item>
                </ion-col>

                <ion-col size="12"
                         size-md="6">
                    <ion-item class="range-component"
                              lines="full">
                        <ion-label position="floating">To Amount</ion-label>
                        <ion-input placeholder="Enter amount"
                                   formControlName="toAmount"
                                   type="currency"></ion-input>
                    </ion-item>
                </ion-col>

                <ion-col size="12">
                    <ion-item lines="full">
                        <ion-label position="floating">Categories</ion-label>
                        <ionic-selectable #categoryComponent
                                          [items]="subCategories"
                                          placeholder="Select categories"
                                          formControlName="subCategoryIds"
                                          itemValueField="id"
                                          itemTextField="name"
                                          groupValueField="category_id"
                                          groupTextField="category_name"
                                          [isMultiple]="true"
                                          [canClear]="true"
                                          [canSearch]="true">
                            <ng-template ionicSelectableHeaderTemplate>
                                <ion-toolbar color="primary">
                                    <ion-icon name="close-circle"
                                              class="close-button"
                                              slot="end"
                                              (click)="categoryComponent.close()"></ion-icon>
                                    <ion-title>
                                        Select Categories
                                    </ion-title>
                                </ion-toolbar>
                            </ng-template>
                            <ng-template ionicSelectableValueTemplate
                                         let-records="value">
                                <div class="ionic-selectable-value-item">
                                    {{formatData(records)}}
                                </div>
                            </ng-template>

                        </ionic-selectable>
                    </ion-item>
                </ion-col>

                <ion-col size="12">
                    <ion-item lines="full">
                        <ion-label position="floating">Payees</ion-label>
                        <ionic-selectable #payeeComponent
                                          [items]="payees"
                                          placeholder="Select payees"
                                          formControlName="payeeIds"
                                          itemValueField="id"
                                          itemTextField="name"
                                          [isMultiple]="true"
                                          [canClear]="true"
                                          [canSearch]="true">
                            <ng-template ionicSelectableHeaderTemplate>
                                <ion-toolbar color="primary">
                                    <ion-icon name="close-circle"
                                              class="close-button"
                                              slot="end"
                                              (click)="payeeComponent.close()"></ion-icon>
                                    <ion-title>
                                        Select Payees
                                    </ion-title>
                                </ion-toolbar>
                            </ng-template>
                            <ng-template ionicSelectableValueTemplate
                                         let-records="value">
                                <div class="ionic-selectable-value-item">
                                    {{formatData(records)}}
                                </div>
                            </ng-template>
                        </ionic-selectable>
                    </ion-item>
                </ion-col>

                <ion-col size="12">
                    <ion-item lines="full">
                        <ion-label position="floating">Notes</ion-label>
                        <ion-input placeholder="Enter notes"
                                   formControlName="notes"
                                   type="text"></ion-input>
                    </ion-item>
                </ion-col>
            </ion-row>
        </ion-grid>
    </form>
</ion-content>
<ion-footer>
    <ion-toolbar>
        <ion-grid>
            <ion-row>
                <ion-col>
                    <ion-button type="button"
                                color="light"
                                (click)="close()"
                                expand="block">Close</ion-button>
                </ion-col>
                <ion-col>
                    <ion-button type="button"
                                color="light"
                                (click)="clear()"
                                expand="block">Clear</ion-button>
                </ion-col>
                <ion-col>
                    <ion-button type="submit"
                                (click)="apply()"
                                expand="block">Submit</ion-button>
                </ion-col>
            </ion-row>
        </ion-grid>
    </ion-toolbar>
</ion-footer>